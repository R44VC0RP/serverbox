services:
  serverbox-proxy:
    build:
      context: .
      dockerfile: Dockerfile
    env_file:
      - .env
    environment:
      SERVERBOX_PROXY_HOST: 0.0.0.0
      SERVERBOX_PROXY_PORT: 7788
      SERVERBOX_ADMIN_API_KEY: ${SERVERBOX_ADMIN_API_KEY:-dev-admin-key}
      SERVERBOX_LOG_LEVEL: ${SERVERBOX_LOG_LEVEL:-debug}
      SERVERBOX_PROXY_REQUEST_LOGS: ${SERVERBOX_PROXY_REQUEST_LOGS:-true}
      SERVERBOX_PROXY_AUTO_RESUME: ${SERVERBOX_PROXY_AUTO_RESUME:-true}
      SERVERBOX_PROXY_RESUME_TIMEOUT_MS: ${SERVERBOX_PROXY_RESUME_TIMEOUT_MS:-60000}
      SERVERBOX_PROXY_REQUEST_TIMEOUT_MS: ${SERVERBOX_PROXY_REQUEST_TIMEOUT_MS:-60000}
      SERVERBOX_DB_PATH: /data/serverbox.db
    ports:
      - "${SERVERBOX_PROXY_PORT:-7788}:7788"
    volumes:
      - serverbox_data:/data
    restart: unless-stopped

volumes:
  serverbox_data:
